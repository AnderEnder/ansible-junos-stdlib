---
- name: Test junos_get_facts module
  hosts: all
  connection: local
  gather_facts: no
  vars:
    ansible_python_interpreter: /usr/local/bin/python
  roles:
    - Juniper.junos
  tasks:
    - name: "TEST 1 - Gather Facts"
      junos_get_facts:
        host: "{{ ansible_ssh_host }}"
        port: "{{ ansible_ssh_port }}"
        user: root
        passwd: Juniper
      ignore_errors: True
      register: test1

#    - debug: var=test1

    - name: Check TEST 1
      assert:
        that:
          - test1.facts.hostname == 'vsrx'
          - test1.facts.virtual == true
