---
- name: Junos QFX ToR Mode-Configuration
  hosts: qfx_nodes
  connection: local
  gather_facts: no
  vars:
    mode: node
    logfile: /usr/local/junos/log/qfx_nodes.log
    savedir: /usr/local/junos/inventory

  tasks:
    - name: QFX {{mode}}-mode
      junos_qfx_mode:
        name={{ inventory_hostname }}
        port='-t={{termserver}}:{{ts_port}}'
        mode={{ mode }}
        logfile={{ logfile }}
        savedir={{ savedir }}
